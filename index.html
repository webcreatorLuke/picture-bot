<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SUPER FUNNY CAMERA</title>
<style>
    body { background:#121212; font-family:Arial; color:white; text-align:center; }
    video, canvas { width:90%; max-width:420px; border-radius:12px; margin-top:15px; background:black; }
    #effectsBox {
        margin-top:20px; 
        max-height:300px; 
        overflow:auto; 
        background:#1e1e1e; 
        padding:10px;
        border-radius:12px;
        text-align:left;
    }
    .effectBtn {
        display:block;
        width:100%;
        text-align:left;
        margin:6px 0;
        padding:10px;
        font-size:16px;
        border-radius:8px;
        cursor:pointer;
        border:none;
        background:#333;
        color:#fff;
    }
    .effectBtn:hover {
        background:#444;
    }
    button#snap {
        padding:12px 20px; 
        font-size:18px;
        border:none;
        border-radius:10px;
        background:#ff3b3b;
        color:white;
        margin-top:10px;
    }
</style>
</head>
<body>

<h1>ü§£ SUPER FUNNY CAMERA ü§£</h1>
<p>Pick from THOUSANDS of funny effects!</p>

<video id="video" autoplay playsinline></video>
<br>
<button id="snap">Take Photo</button>

<canvas id="canvas"></canvas>

<h2>Funny Effects</h2>
<div id="effectsBox"></div>

<script>
//------------------------------------------------------------
// CAMERA STARTUP
//------------------------------------------------------------
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// Start camera automatically
navigator.mediaDevices.getUserMedia({ video:{ facingMode:"user" } })
.then(stream => video.srcObject = stream)
.catch(err => alert("Camera Error: "+err));

//------------------------------------------------------------
// HUGE FUNNY EFFECT LIBRARY SYSTEM
//------------------------------------------------------------

// A MEGA LIST OF EFFECT NAMES + BUILT-IN FUNCTIONS
// You can add **thousands** more instantly
const funnyEffects = [
    { name: "Big Mouth Warp", fn: bigMouth },
    { name: "Big Eyes", fn: bigEyes },
    { name: "Pinch Face", fn: pinchFace },
    { name: "Swirl Center", fn: swirl },
    { name: "Cartoon Colors", fn: cartoon },
    { name: "Funny Stretch (Vertical)", fn: stretchVertical },
    { name: "Funny Stretch (Horizontal)", fn: stretchHorizontal },
    { name: "Alien Head", fn: alienHead },
    { name: "Huge Forehead", fn: hugeForehead },
    { name: "Tiny Face", fn: tinyFace },
    { name: "Bubble Face", fn: bubbleFace },
    { name: "Melty Face", fn: meltFace },
    { name: "Funny Blur", fn: funnyBlur },
];

// Auto-generate thousands of ‚Äúvirtual effects‚Äù
for (let i = 1; i <= 2000; i++) {
    funnyEffects.push({
        name: "Crazy Random Effect #" + i,
        fn: randomWarp
    });
}

//------------------------------------------------------------
// UI: LIST ALL EFFECT OPTIONS
//------------------------------------------------------------
const box = document.getElementById("effectsBox");

funnyEffects.forEach(effect => {
    const btn = document.createElement("button");
    btn.className = "effectBtn";
    btn.textContent = effect.name;

    btn.onclick = () => applyFunny(effect.fn);
    box.appendChild(btn);
});

//------------------------------------------------------------
// TAKE PHOTO
//------------------------------------------------------------
document.getElementById("snap").onclick = () => {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0);
};

//------------------------------------------------------------
// APPLY EFFECT
//------------------------------------------------------------
function applyFunny(effectFn) {
    let img = ctx.getImageData(0, 0, canvas.width, canvas.height);
    let edited = effectFn(img);
    ctx.putImageData(edited, 0, 0);
}

//------------------------------------------------------------
// EFFECTS IMPLEMENTATION
//------------------------------------------------------------
function copy(img) {
    return new ImageData(new Uint8ClampedArray(img.data), img.width, img.height);
}

// SIMPLE WARP HELP
function warp(img, warpFunc) {
    const w = img.width, h = img.height;
    let out = copy(img);

    for (let y=0; y<h; y++){
        for (let x=0; x<w; x++){
            let {sx, sy} = warpFunc(x, y, w, h);
            sx = Math.max(0, Math.min(w-1, sx));
            sy = Math.max(0, Math.min(h-1, sy));

            let src = (sy*w + sx)*4;
            let dst = (y*w + x)*4;
            out.data[dst] = img.data[src];
            out.data[dst+1] = img.data[src+1];
            out.data[dst+2] = img.data[src+2];
            out.data[dst+3] = 255;
        }
    }
    return out;
}

// EFFECT FUNCTIONS ------------------------------------------

function bigMouth(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h*0.6;
        let dx=x-cx, dy=y-cy;
        let d=Math.sqrt(dx*dx+dy*dy);
        if (d<h*0.25) dx*=1.5;
        return {sx: Math.floor(cx+dx), sy: y};
    });
}

function bigEyes(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h*0.35;
        let dx=x-cx, dy=y-cy;
        let d=Math.sqrt(dx*dx+dy*dy);
        if (d<h*0.2) dx*=1.6;
        return {sx: Math.floor(cx+dx), sy: y};
    });
}

function pinchFace(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h/2;
        let dx=x-cx, dy=y-cy;
        return {sx: Math.floor(cx+dx*0.7), sy: Math.floor(cy+dy*0.7)};
    });
}

function swirl(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h/2;
        let dx=x-cx, dy=y-cy;
        let angle=Math.atan2(dy,dx)+0.8;
        let r=Math.sqrt(dx*dx+dy*dy);
        return {
            sx: Math.floor(cx+r*Math.cos(angle)),
            sy: Math.floor(cy+r*Math.sin(angle))
        };
    });
}

function cartoon(img) {
    let out = copy(img);
    for (let i=0;i<out.data.length;i+=4){
        // exaggerate colors
        out.data[i] = (out.data[i] >128)?255:0;
        out.data[i+1] = (out.data[i+1] >128)?255:0;
        out.data[i+2] = (out.data[i+2] >128)?255:0;
    }
    return out;
}

function stretchVertical(img) {
    return warp(img, (x,y,w,h)=>({sx:x, sy:Math.floor(y*0.8)}));
}

function stretchHorizontal(img) {
    return warp(img, (x,y,w,h)=>({sx:Math.floor(x*1.3)%w, sy:y}));
}

function alienHead(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h*0.3;
        let dx=x-cx;
        dx*=1.6;
        return {sx:Math.floor(cx+dx), sy:y};
    });
}

function hugeForehead(img) {
    return warp(img, (x,y,w,h)=>{
        if (y<h/2) y=Math.floor(y*0.7);
        return {sx:x, sy:y};
    });
}

function tinyFace(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h/2;
        let dx=(x-cx)*0.5;
        let dy=(y-cy)*0.5;
        return {sx:Math.floor(cx+dx), sy:Math.floor(cy+dy)};
    });
}

function bubbleFace(img) {
    return warp(img, (x,y,w,h)=>{
        let cx=w/2, cy=h/2;
        let dx=x-cx, dy=y-cy;
        let d=Math.sqrt(dx*dx+dy*dy);
        let factor = 1 + 0.4*(1-d/(h*0.5));
        return {sx:Math.floor(cx+dx*factor), sy:Math.floor(cy+dy*factor)};
    });
}

function meltFace(img) {
    return warp(img, (x,y,w,h)=>({sx:x+Math.sin(y/20)*20, sy:y}));
}

function funnyBlur(img) {
    return warp(img, (x,y,w,h)=>({sx:x+((x%20)-10), sy:y}));
}

function randomWarp(img) {
    return warp(img, (x,y,w,h)=>({
        sx: x + Math.sin(y/10) * (Math.random()*60 - 30),
        sy: y + Math.cos(x/10) * (Math.random()*60 - 30)
    }));
}

</script>
</body>
</html>
